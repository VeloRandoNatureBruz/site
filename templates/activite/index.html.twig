{% extends 'base.html.twig' %}

{% block title %}programme des activités |{{ parent() }}
{% endblock %}
{# La page programme des activités #}
{% block body %}

	{# Le titre #}
	<div class="container container-profil">
		{% if photoIntro is not empty %}
			<figure class="textcenter">
				<img src="{{ asset('photo-intro/'~ photoIntro) }}" alt="Programme des activités">
				<figcaption class="fig">Programme des activités</figcaption>
			</figure>
		{% else %}
			<h1 class="titreEnTete">Programme des activités</h1>
		{% endif %}
		<div class="col-lg-12">
			{% if is_granted("ROLE_ADMIN") %}
				<div class="boutonModifierTexte">
					<button class="button_show btn btn-outline-success">Modifier la photo</button>
				</div>
				<div class="form-group formulaire" id="form">
					{{ form(formPhotoIntro) }}
					<div
							class="mt-3 mb-5 text-center">
						{# <p>{{ form_widget(formPhotoIntro.Enregistrer) }}</p> #}
						<button class="button_close btn btn-outline-secondary">Annuler</button>
					</div>
				</div>
			{% endif %}
		</div>
	</div>
	<div class="center-hr">
		<hr class="hr25-pourcent center">
	</div>

	<div class="container-fluid">
		<div class="row justify-content-around">
			{# On inclut le Filter #}
			<div class="col-lg-2 col-sm-12">
				{% include 'activite/_filter.html.twig' with {form: form} only %}
			</div>
			<div class="col-lg-9 col-sm-12 col-xs-12">
				<div class="row flex-start">
					<table class="table">
						<thead>
						<tr>
							<th>Date</th>
							<th>Nom</th>
							<th>Catégorie</th>
							<th>Ville</th>
							<th>Actions</th>
						</tr>
						</thead>
						<tbody>
						{% for activite in activites %}
							{% if (activite.etat.libelle =="ouverte") or (activite.etat.libelle =="modifiée") %}
								<tr>
									<td>{{ activite.dateActivite()|format_datetime('full', 'short', locale='fr')}}</td>
									<td>{{ activite.nom }}</td>
									<td>{{ activite.categoriesFormation().getLibelle() }}</td>
									<td>{{ activite.lieu.nomVille|slice(0,20) }}</td>
									<td>
										<a class="btn btn-info btn-sm" href="{{ path('activite_detail', {'id': activite.id}) }}">Détails</a>
									</td>
								</tr>
							{% endif %}
						{% endfor %}
						</tbody>
					</table>
				</div>
			</div>
		</div>
	</div>

	{# pour trier les colonnes bootstrap en js #}
	<script>
		function starsSorter(a, b) {
			if (new Date(a) > new Date(b))
				return 1;


			if (new Date(a) < new Date(b))
				return -1;


			return 0;
		}
	</script>
{% endblock %}
