{% extends 'base.html.twig' %}

{% block title %}programme des activités |{{ parent() }}
{% endblock %}
{# La page programme des activités #}
{% block body %}

	{# Le titre #}
	<div class="container container-profil">
		{% if photoIntro is not empty %}
			<figure class="textcenter">
				<img src="{{ asset('photo-intro/'~ photoIntro) }}" alt="Programme des activités">
				<figcaption class="fig">Programme des activités</figcaption>
			</figure>
		{% else %}
			<h1 class="titreEnTete">Programme des activités</h1>
		{% endif %}
		<div class="col-lg-12">
			{% if is_granted("ROLE_ADMIN") %}
				<div class="boutonModifierTexte">
					<button class="button_show btn btn-outline-success">Modifier la photo</button>
				</div>
				<div class="form-group formulaire" id="form">
					{{ form(formPhotoIntro) }}
					<div
							class="mt-3 mb-5 text-center">
						{# <p>{{ form_widget(formPhotoIntro.Enregistrer) }}</p> #}
						<button class="button_close btn btn-outline-secondary">Annuler</button>
					</div>
				</div>
			{% endif %}
		</div>
	</div>
	<div class="center-hr">
		<hr class="hr25-pourcent center">
	</div>

	<div class="container-fluid">
		<div class="row justify-content-around">
			{# On inclut le Filter #}
			<div class="col-lg-2 col-sm-12">
				{% include 'activite/_filter.html.twig' with {form: form} only %}
			</div>
			<div class="col-lg-9 col-sm-12 col-xs-12">
				<!-- Début de la division avec les classes de grille Bootstrap pour la mise en page -->
				<div class="row flex-start">
					<!-- Début d'une nouvelle ligne avec la classe "flex-start" pour aligner les éléments à gauche -->
					<table class="table">
						<!-- Début d'un tableau avec la classe Bootstrap "table" pour un affichage tabulaire -->
						<thead>
						<!-- En-tête du tableau -->
						<tr>
							<!-- Ligne d'en-tête -->
							<th>Date</th>
							<!-- Colonne pour la date -->
							<th>Nom</th>
							<!-- Colonne pour le nom de l'activité -->
							<th>Catégorie</th>
							<!-- Colonne pour la catégorie de l'activité -->
							<th>Ville</th>
							<!-- Colonne pour la ville de l'activité -->
							<th>Actions</th>
							<!-- Colonne pour les actions (boutons) -->
						</tr>
						</thead>
						<tbody>
						<!-- Corps du tableau -->
						{% for activite in activites %}
							<!-- Boucle sur les activités -->
							{% if (activite.etat.libelle =="ouverte") or (activite.etat.libelle =="modifiée") %}
								<!-- Condition pour filtrer les activités par leur état -->
								<tr>
									<!-- Nouvelle ligne du tableau pour chaque activité -->
									<td>{{ activite.dateActivite()|format_datetime('full', 'short', locale='fr')}}</td>
									<!-- Colonne pour afficher la date de l'activité -->
									<td>{{ activite.nom }}</td>
									<!-- Colonne pour afficher le nom de l'activité -->
									<td>{{ activite.categoriesFormation().getLibelle() }}</td>
									<!-- Colonne pour afficher la catégorie de l'activité -->
									<td>{{ activite.lieu.nomVille|slice(0,20) }}</td>
									<!-- Colonne pour afficher le nom de la ville de l'activité, tronqué à 20 caractères -->
									<td>
										<!-- Colonne pour les actions -->
										<a class="btn btn-info btn-sm" href="{{ path('activite_detail', {'id': activite.id}) }}">Détails</a>
										<!-- Bouton pour afficher les détails de l'activité -->
									</td>
								</tr>
							{% endif %}
						{% endfor %}
						<!-- Fin de la boucle sur les activités -->
						</tbody>
					</table>
					<!-- Fin du tableau -->
				</div>
				<!-- Fin de la division avec la classe "row" -->
			</div>
			<!-- Fin de la division avec les classes de grille Bootstrap -->

		</div>
	</div>

	{# pour trier les colonnes bootstrap en js #}
	<script>
		function starsSorter(a, b) {
			if (new Date(a) > new Date(b))
				return 1;


			if (new Date(a) < new Date(b))
				return -1;


			return 0;
		}
	</script>
{% endblock %}
